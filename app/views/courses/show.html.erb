<h2><%= @course.name %></h2>
<% if (current_user != @course.user) && (!CourseSubscription.user_subscribed?(current_user, @course)) %>
  <%= button_to course_subscribe_path(@course), class: "btn btn-info" do %>
    <i class="fa-solid fa-square-plus"></i> Join Course
  <% end %>
<% end %>
<p>
  <%= @course.description %>
</p>
<%= cl_image_tag @course.poster.key, height: 300, width: 400, crop: :fill, class: "img-fluid" %>
<p>
  <i class="fa-solid fa-book-atlas"></i>
  <%=  @course.category.category %>
</p>
<% if @course.user == current_user %>
  <hr>
  <%= link_to "Edit Course", edit_course_path(@course), class: "btn btn-info" %>
  <%= link_to "Add Lesson To Course", new_course_lesson_path(@course), class: "btn btn-primary" %>
  <%= link_to "Delete", course_path(@course), class: "btn btn-danger text-white float-end",
                data: {turbo_method: :delete, turbo_confirm: "Are you sure? Deleting this course will remove all lessons and statistics for others!"}%>
  <hr>
<% end %>
<ol>
  <% @lessons.each do |lesson| %>
    <li><%= lesson.name %> <%= link_to "View Lesson", course_lesson_path(@course, lesson), class: "btn btn-success" %></li>
  <% end %>
</ol>
